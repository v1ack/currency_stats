import{d as y,C as N,r as L,a as _,w as g,o as w,b as x,c as A,e as l,f as T,u as U,g as K,h as v,v as B,i as E,p as M,j as R,k as D,l as O,m as F}from"./vendor.64542932.js";const P=function(){const u=document.createElement("link").relList;if(u&&u.supports&&u.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))a(e);new MutationObserver(e=>{for(const o of e)if(o.type==="childList")for(const m of o.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&a(m)}).observe(document,{childList:!0,subtree:!0});function n(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerpolicy&&(o.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?o.credentials="include":e.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(e){if(e.ep)return;e.ep=!0;const o=n(e);fetch(e.href,o)}};P();const S=[{name:"AUD",color:"#4c061d"},{name:"AZN",color:"#d17a22"},{name:"GBP",color:"#b4c292"},{name:"AMD",color:"#736f4e"},{name:"BYN",color:"#3b3923"},{name:"BGN",color:"#4c5b61"},{name:"BRL",color:"#2c423f"},{name:"HUF",color:"#574f2a"},{name:"HKD",color:"#1c3a13"},{name:"DKK",color:"#394f49"},{name:"USD",color:"#dbc2cf"},{name:"EUR",color:"#9fa2b2"},{name:"INR",color:"#3c7a89"},{name:"KZT",color:"#2e4756"},{name:"CAD",color:"#16262e"},{name:"KGS",color:"#802392"},{name:"CNY",color:"#a5f8d3"},{name:"MDL",color:"#684551"},{name:"NOK",color:"#402e2a"},{name:"PLN",color:"#9cd08f"},{name:"RON",color:"#393d3f"},{name:"XDR",color:"#d5bbb1"},{name:"SGD",color:"#9cc4b2"},{name:"TJS",color:"#c98ca7"},{name:"TRY",color:"#e76d83"},{name:"TMT",color:"#ff206e"},{name:"UZS",color:"#fbff12"},{name:"UAH",color:"#c84630"},{name:"CZK",color:"#e03616"},{name:"SEK",color:"#cc5803"},{name:"CHF",color:"#8fbfe0"},{name:"ZAR",color:"#7c77b9"},{name:"KRW",color:"#1d8a99"},{name:"JPY",color:"#0bc9cd"}],b=S.reduce((t,u)=>(t[u.name]=u.color,t),{}),C=S.map(t=>t.name);function k(t,u=["USD","EUR"]){let n=new Set(u);if(t.length<2)return{labels:[],datasets:C.map(e=>({label:e,data:{[e]:0},borderColor:b[e],backgroundColor:b[e],hidden:!n.has(e),parsing:{yAxisKey:e}}))};t=t.reverse();let a=t[0];for(let e=1;e<t.length;e++)for(let o in t[e])typeof t[e][o]=="number"&&(t[e][o]=(t[e][o]-a[o])/a[o]);for(let e in a)typeof a[e]=="number"&&(a[e]=0);return{labels:t.map(e=>e.x.toLocaleDateString()),datasets:C.map(e=>({label:e,data:t,borderColor:b[e],backgroundColor:b[e],hidden:!n.has(e),parsing:{yAxisKey:e}}))}}function I(t){const n=new TextDecoder("windows-1251").decode(t);return new DOMParser().parseFromString(n,"text/xml")}function V(t){let u;return()=>{u&&clearTimeout(u),u=setTimeout(t,1e3)}}async function G(t){const u=t.toLocaleDateString("en-GB",{month:"2-digit",day:"2-digit",year:"numeric"});return await fetch(`/XML_daily.asp?date_req=${u}`).then(n=>n.arrayBuffer()).then(I).then(n=>{let a={x:t};for(let e of n.getElementsByTagName("Valute"))a[e.getElementsByTagName("CharCode")[0].textContent]=Number(e.getElementsByTagName("Value")[0].textContent.replace(",","."));return a})}var Y=(t,u)=>{const n=t.__vccOpts||t;for(const[a,e]of u)n[a]=e;return n};const Z=t=>(M("data-v-16a3d6a5"),t=t(),R(),t),j={class:"wrapper"},H={class:"container"},q={class:"panel"},J=Z(()=>l("div",null,"\u0417\u0430\u0433\u0440\u0443\u0437\u043A\u0430 \u0434\u0430\u043D\u043D\u044B\u0445 \u0438\u0437",-1)),X=D(" \u0421\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u043D\u044B\u0445 \u0434\u0430\u043D\u043D\u044B\u0445 "),$=D(" API \u0426\u0411 \u0420\u0424 "),W={class:"panel__inputs"},z=D(" \u041A\u043E\u043B\u0438\u0447\u0435\u0441\u0442\u0432\u043E \u043B\u0435\u0442: "),Q=D(" \u041A\u043E\u043B\u0438\u0447\u0435\u0441\u0442\u0432\u043E \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0439 \u0432 \u0433\u043E\u0434: "),ee=y({setup(t){N.register(...L);const u={plugins:{title:{display:!0,text:"\u041F\u0440\u0438\u0440\u043E\u0441\u0442 \u0438\u043D\u043E\u0441\u0442\u0440\u0430\u043D\u043D\u044B\u0445 \u0432\u0430\u043B\u044E\u0442 \u043A \u0440\u0443\u0431\u043B\u044E \u043F\u043E \u0434\u0430\u043D\u043D\u044B\u043C \u0426\u0411\u0420\u0424"}}},n=_([]),a=_("static"),e=_(3),o=_(4);async function m(){let s=[];const r=new Date;let i=e.value,f=o.value;for(let d=0;d<i*f;d++){let c=new Date(r.getFullYear()-Math.floor(d/f),10-d%f*12/f,1);s.push(c)}let p;if(a.value==="api")p=await Promise.all(s.map(d=>G(d)));else{let d=new Set(s.map(c=>c.toDateString()));p=await fetch("/list.json").then(c=>c.json()),p.forEach(c=>c.x=new Date(c.x)),p=p.filter(c=>d.has(c.x.toDateString()))}n.value=k(p,["USD","EUR"])}const h=V(m);return g(e,(s,r)=>{s>6||s<1?e.value=r:h()}),g(o,(s,r)=>{s>12||s<1?o.value=r:h()}),g(a,()=>h()),w(m),(s,r)=>(x(),A("div",j,[l("div",H,[T(U(K.LineChart),{chartData:n.value,options:u},null,8,["chartData"])]),l("div",q,[l("div",null,[J,l("label",null,[v(l("input",{"onUpdate:modelValue":r[0]||(r[0]=i=>a.value=i),name:"load_from",type:"radio",value:"static"},null,512),[[B,a.value]]),X]),l("label",null,[v(l("input",{"onUpdate:modelValue":r[1]||(r[1]=i=>a.value=i),name:"load_from",type:"radio",value:"api"},null,512),[[B,a.value]]),$])]),l("div",W,[l("label",null,[z,v(l("input",{"onUpdate:modelValue":r[2]||(r[2]=i=>e.value=i),max:"6",min:"1",type:"number"},null,512),[[E,e.value]])]),l("label",null,[Q,v(l("input",{"onUpdate:modelValue":r[3]||(r[3]=i=>o.value=i),max:"12",min:"1",type:"number"},null,512),[[E,o.value]])])])])]))}});var te=Y(ee,[["__scopeId","data-v-16a3d6a5"]]);const oe=y({setup(t){return(u,n)=>(x(),O(te))}});F(oe).mount("#app");

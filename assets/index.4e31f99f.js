import{d as g,C as w,r as A,a as _,w as y,o as T,b as B,c as U,e as r,f as K,u as M,g as R,n as x,h as v,v as C,i as E,p as k,j as F,k as S,l as O,m as P}from"./vendor.c08dd7bd.js";const I=function(){const u=document.createElement("link").relList;if(u&&u.supports&&u.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))o(e);new MutationObserver(e=>{for(const a of e)if(a.type==="childList")for(const m of a.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&o(m)}).observe(document,{childList:!0,subtree:!0});function n(e){const a={};return e.integrity&&(a.integrity=e.integrity),e.referrerpolicy&&(a.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?a.credentials="include":e.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(e){if(e.ep)return;e.ep=!0;const a=n(e);fetch(e.href,a)}};I();const N=[{name:"AUD",color:"#4c061d"},{name:"AZN",color:"#d17a22"},{name:"GBP",color:"#b4c292"},{name:"AMD",color:"#736f4e"},{name:"BYN",color:"#3b3923"},{name:"BGN",color:"#4c5b61"},{name:"BRL",color:"#2c423f"},{name:"HUF",color:"#574f2a"},{name:"HKD",color:"#1c3a13"},{name:"DKK",color:"#394f49"},{name:"USD",color:"#dbc2cf"},{name:"EUR",color:"#9fa2b2"},{name:"INR",color:"#3c7a89"},{name:"KZT",color:"#2e4756"},{name:"CAD",color:"#16262e"},{name:"KGS",color:"#802392"},{name:"CNY",color:"#a5f8d3"},{name:"MDL",color:"#684551"},{name:"NOK",color:"#402e2a"},{name:"PLN",color:"#9cd08f"},{name:"RON",color:"#393d3f"},{name:"XDR",color:"#d5bbb1"},{name:"SGD",color:"#9cc4b2"},{name:"TJS",color:"#c98ca7"},{name:"TRY",color:"#e76d83"},{name:"TMT",color:"#ff206e"},{name:"UZS",color:"#fbff12"},{name:"UAH",color:"#c84630"},{name:"CZK",color:"#e03616"},{name:"SEK",color:"#cc5803"},{name:"CHF",color:"#8fbfe0"},{name:"ZAR",color:"#7c77b9"},{name:"KRW",color:"#1d8a99"},{name:"JPY",color:"#0bc9cd"}],b=N.reduce((t,u)=>(t[u.name]=u.color,t),{}),L=N.map(t=>t.name);function V(t,u=["USD","EUR"]){let n=new Set(u);if(t.length<2)return{labels:[],datasets:L.map(e=>({label:e,data:{[e]:0},borderColor:b[e],backgroundColor:b[e],hidden:!n.has(e),parsing:{yAxisKey:e}}))};t=t.reverse();let o=t[0];for(let e=1;e<t.length;e++)for(let a in t[e])typeof t[e][a]=="number"&&(t[e][a]=(t[e][a]-o[a])/o[a]);for(let e in o)typeof o[e]=="number"&&(o[e]=0);return{labels:t.map(e=>e.x.toLocaleDateString()),datasets:L.map(e=>({label:e,data:t,borderColor:b[e],backgroundColor:b[e],hidden:!n.has(e),parsing:{yAxisKey:e}}))}}function G(t){const n=new TextDecoder("windows-1251").decode(t);return new DOMParser().parseFromString(n,"text/xml")}function Y(t){let u;return()=>{u&&clearTimeout(u),u=setTimeout(t,1e3)}}async function Z(t){const u=t.toLocaleDateString("en-GB",{month:"2-digit",day:"2-digit",year:"numeric"});return await fetch(`/XML_daily.asp?date_req=${u}`).then(n=>n.arrayBuffer()).then(G).then(n=>{let o={x:t};for(let e of n.getElementsByTagName("Valute"))o[e.getElementsByTagName("CharCode")[0].textContent]=Number(e.getElementsByTagName("Value")[0].textContent.replace(",","."));return o})}var j=(t,u)=>{const n=t.__vccOpts||t;for(const[o,e]of u)n[o]=e;return n};const h=t=>(k("data-v-7b191457"),t=t(),F(),t),H={class:"wrapper"},q={class:"container"},J={class:"panel"},X=h(()=>r("h2",null,"\u041F\u0430\u0440\u0430\u043C\u0435\u0442\u0440\u044B",-1)),$=h(()=>r("div",null,"\u0417\u0430\u0433\u0440\u0443\u0437\u043A\u0430 \u0434\u0430\u043D\u043D\u044B\u0445 \u0438\u0437",-1)),z={class:"panel__radio"},W=h(()=>r("span",null,"\u0421\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u043D\u044B\u0445 \u0434\u0430\u043D\u043D\u044B\u0445",-1)),Q=h(()=>r("span",null,"API \u0426\u0411 \u0420\u0424",-1)),ee={class:"panel__inputs"},te=S(" \u041A\u043E\u043B\u0438\u0447\u0435\u0441\u0442\u0432\u043E \u043B\u0435\u0442: "),oe=S(" \u041A\u043E\u043B\u0438\u0447\u0435\u0441\u0442\u0432\u043E \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0439 \u0432 \u0433\u043E\u0434: "),ae=g({setup(t){w.register(...A);const u={plugins:{title:{display:!0,text:"\u041F\u0440\u0438\u0440\u043E\u0441\u0442 \u0438\u043D\u043E\u0441\u0442\u0440\u0430\u043D\u043D\u044B\u0445 \u0432\u0430\u043B\u044E\u0442 \u043A \u0440\u0443\u0431\u043B\u044E \u043F\u043E \u0434\u0430\u043D\u043D\u044B\u043C \u0426\u0411\u0420\u0424"}}},n=_([]),o=_("static"),e=_(3),a=_(4);async function m(){let s=[];const l=new Date;let i=e.value,f=a.value;for(let d=0;d<i*f;d++){let c=new Date(l.getFullYear()-Math.floor(d/f),10-d%f*12/f,1);s.push(c)}let p;if(o.value==="api")p=await Promise.all(s.map(d=>Z(d)));else{let d=new Set(s.map(c=>c.toDateString()));p=await fetch("/currency_stats/list.json").then(c=>c.json()),p.forEach(c=>c.x=new Date(c.x)),p=p.filter(c=>d.has(c.x.toDateString()))}n.value=V(p,["USD","EUR"])}const D=Y(m);return y(e,(s,l)=>{s>6||s<1?e.value=l:D()}),y(a,(s,l)=>{s>12||s<1?a.value=l:D()}),y(o,()=>D()),T(m),(s,l)=>(B(),U("div",H,[r("div",q,[K(M(R.LineChart),{chartData:n.value,options:u},null,8,["chartData"])]),r("div",J,[X,r("div",null,[$,r("div",z,[r("label",{class:x([{checked:o.value==="static"},"panel__radio__label"])},[v(r("input",{"onUpdate:modelValue":l[0]||(l[0]=i=>o.value=i),name:"load_from",type:"radio",value:"static"},null,512),[[C,o.value]]),W],2),r("label",{class:x([{checked:o.value==="api"},"panel__radio__label"])},[v(r("input",{"onUpdate:modelValue":l[1]||(l[1]=i=>o.value=i),name:"load_from",type:"radio",value:"api"},null,512),[[C,o.value]]),Q],2)])]),r("div",ee,[r("label",null,[te,v(r("input",{"onUpdate:modelValue":l[2]||(l[2]=i=>e.value=i),max:"6",min:"1",type:"number"},null,512),[[E,e.value]])]),r("label",null,[oe,v(r("input",{"onUpdate:modelValue":l[3]||(l[3]=i=>a.value=i),max:"12",min:"1",type:"number"},null,512),[[E,a.value]])])])])]))}});var ue=j(ae,[["__scopeId","data-v-7b191457"]]);const ne=g({setup(t){return(u,n)=>(B(),O(ue))}});P(ne).mount("#app");
